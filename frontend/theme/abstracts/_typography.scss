@use 'sass:map';
@use 'sass:math';
@use 'config' as *;
@use 'functions' as *;

// Font size scale factors
// - Mobile: perfect fourth (3:4 ≈ 1.333)     → 17, 17, 23, 30, 40
// - Desktop: augmented fourth (1:√2 ≈ 1.414) → 17, 24, 34, 48, 68

$typography-styles: (
  'display': (
    mobile: (
      font-size: 40,
      font-weight: var(--font-weight-titles),
      letter-spacing: -0.5,
      line-height: math.div(48, 40),
      padding-top: 1,
      padding-bottom: 7
    ),
    tablet: (
      font-size: 48,
      line-height: math.div(56, 48),
      letter-spacing: -0.5,
      padding-top: 2,
      padding-bottom: 6
    ),
    tablet-l: (
      font-size: 68,
      line-height: math.div(72, 68),
      letter-spacing: -2,
      padding-top: 2,
      padding-bottom: 6
    )
  ),
  'title': (
    mobile: (
      font-size: 28,
      font-weight: var(--font-weight-titles),
      letter-spacing: -0.3,
      line-height: math.div(32, 28),
      padding-top: 1,
      padding-bottom: 7
    ),
    tablet: (
      font-size: 48,
      line-height: math.div(56, 48),
      letter-spacing: -0.5,
      padding-top: 2,
      padding-bottom: 6
    )
  ),
  'h2': (
    mobile: (
      font-size: 23,
      font-weight: var(--font-weight-titles),
      letter-spacing: -0.2,
      line-height: math.div(32, 23),
      padding-top: 7,
      padding-bottom: 1
    ),
    tablet: (
      font-size: 34,
      letter-spacing: -1.3,
      line-height: math.div(40, 34),
      padding-top: 7,
      padding-bottom: 1
    )
  ),
  'h3': (
    mobile: (
      font-size: 17,
      font-weight: var(--font-weight-titles),
      letter-spacing: -0.1,
      line-height: math.div(24, 17),
      padding-top: 6,
      padding-bottom: 2
    ),
    tablet: (
      font-size: 24,
      letter-spacing: -0.3,
      line-height: math.div(32, 24),
      padding-top: 7,
      padding-bottom: 1
    )
  ),
  'base': (
    mobile: (
      font-size: 17,
      font-weight: var(--font-weight-base),
      letter-spacing: normal,
      line-height: math.div(24, 17),
      padding-top: 6,
      padding-bottom: 2
    )
  ),
  'body-sm': (
    mobile: (
      font-size: 15,
      font-weight: var(--font-weight-base),
      letter-spacing: normal,
      line-height: math.div(20, 15),
      padding-top: 1,
      padding-bottom: 3
    )
  ),
  'label': (
    mobile: (
      font-size: 15,
      font-weight: var(--font-weight-base),
      letter-spacing: normal,
      line-height: math.div(20, 15),
      padding-top: 1,
      padding-bottom: 3
    )
  ),
  'caption': (
    mobile: (
      font-size: 12,
      font-weight: var(--font-weight-base),
      letter-spacing: 0.1,
      line-height: math.div(16, 12),
      padding-top: 4,
      padding-bottom: 4
    )
  )
) !default;

// Generate CSS custom properties for typography styles
// Generates all typography variables for a specific breakpoint
@mixin generate-typography-vars(
  $styles,
  $bp: mobile,
  $allowed: (font-size, line-height, letter-spacing, font-weight, padding-top, padding-bottom)
) {
  @each $name, $data in $styles {
    $bp-data: map.get($data, $bp);
    @if $bp-data {
      @each $prop in $allowed {
        @if map.has-key($bp-data, $prop) {
          --#{$prop}-#{$name}: #{format-typography-value($prop, map.get($bp-data, $prop))};
        }
      }
    }
  }
}
