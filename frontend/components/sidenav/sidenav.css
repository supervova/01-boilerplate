/* -------------------------------------------------------------------------- */
/* #region: BASE                                                              */
/* -------------------------------------------------------------------------- */

@scope (.sidenav) {
  :scope {
    --sidenav-height: 5.5rem;
    --sidenav-height-desktop: var(--dim-6);
    --sidenav-menu-height: 5rem;
    --sidenav-item-gap: var(--dim-0p5);
    --sidenav-dot-size: var(--dim-1);
    --sidenav-label-color: var(--color-text-02);
    --sidenav-label-size: var(--font-size-body-sm);
    --sidenav-label-weight: 500;
    --sidenav-label-letter-spacing: var(--letter-spacing-body-sm, 0);
    --sidenav-label-line-height: var(--line-height-body-sm);
    --sidenav-hover-gradient:
      radial-gradient(
        50% 24px at 50% 100%,
        rgb(255 255 255 / 0.16),
        rgb(255 255 255 / 0.14) 2%,
        rgb(255 255 255 / 0.12) 10%,
        rgb(255 255 255 / 0.09) 21%,
        rgb(255 255 255 / 0.06) 36%,
        rgb(255 255 255 / 0.03) 54%,
        rgb(255 255 255 / 0)
      );
    --sidenav-layer: 30;
    --sidenav-layer-desktop: 32;

    align-items: center;
    background: transparent;
    display: flex;
    justify-content: space-between;
    padding-block-start: var(--dim-1);
    padding-inline: var(--dim-2p5);
    position: relative;
    height: var(--sidenav-height);
  }

  :scope > .container {
    display: contents;
  }

  .sidenav-logo {
    display: block;
    max-width: max-content;
    position: relative;
  }

  .sidenav-logo:hover {
    text-decoration: none;
  }

  .sidenav-tagline {
    color: var(--sidenav-label-color);
    font-size: var(--sidenav-label-size);
    font-weight: var(--sidenav-label-weight);
    letter-spacing: var(--sidenav-label-letter-spacing);
    line-height: var(--sidenav-label-line-height);
    position: absolute;
    inset-block-start: var(--lh);
    inset-inline-start: var(--dim-6);
  }

  .sidenav-menu {
    align-items: stretch;
    background: var(--color-bg);
    bottom: 0;
    display: flex;
    gap: 0;
    inset-inline: 0;
    justify-content: space-around;
    padding-block:
      var(--dim-0p5)
      calc(var(--dim-0p5) + env(safe-area-inset-bottom));
    padding-inline: var(--dim-1);
    position: fixed;
    height: calc(var(--sidenav-menu-height) + env(safe-area-inset-bottom));
    z-index: var(--sidenav-layer);
  }

  .sidenav-item {
    padding: 0;
  }

  @media (--phone) {
    .sidenav-item {
      width: clamp(80px, 25%, 168px);
    }
  }

  .sidenav-item > a,
  .sidenav-item-more [data-role='popover-summary'] {
    align-items: center;
    background: none;
    border-radius: var(--radius-base);
    display: flex;
    flex-direction: column;
    gap: var(--sidenav-item-gap);
    height: 100%;
    justify-content: center;
    padding-block: var(--dim-1p5) var(--dim-1);
    text-align: center;
    text-decoration: none;
    transition:
      background-color var(--duration-100) var(--easing-base),
      background-image var(--duration-200) var(--easing-base);
  }

  .sidenav-item > a:active,
  .sidenav-item-more [data-role='popover-summary']:active {
    background: var(--color-fill);
  }

  .sidenav-item > a:focus-visible,
  .sidenav-item-more [data-role='popover-summary']:focus-visible {
    outline: 2px solid color-mix(in oklch, var(--color-brand) 40%, transparent);
    outline-offset: 2px;
  }

  @media (any-hover: hover) and (pointer: fine) {
    .sidenav-item > a:hover,
    .sidenav-item-more [data-role='popover-summary']:hover {
      background-color: hsl(0 0% 100% / 0.02);
      background-image: var(--sidenav-hover-gradient);
    }
  }

  .sidenav-label {
    color: var(--sidenav-label-color);
    font-size: var(--sidenav-label-size);
    font-weight: var(--sidenav-label-weight);
    letter-spacing: var(--sidenav-label-letter-spacing);
    line-height: var(--sidenav-label-line-height);
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
  }

  .sidenav-item-more {
    position: relative;
  }

  .sidenav-item-open [data-role='popover-summary'] {
    background-color: var(--color-fill);
  }

  .sidenav-item-more .popover-body {
    inset-block-end: 100%;
    inset-inline-end: var(--dim-1p5);
    translate: 0 var(--dim-5);
  }

  .sidenav-item-more .menu-item > a {
    display: block;
  }

  .sidenav-sign-in {
    align-items: center;
    aspect-ratio: 1;
    display: inline-flex;
    gap: var(--sidenav-item-gap);
    justify-content: center;
    padding-inline: 0;
  }

  .sidenav-sign-in .sidenav-label {
    color: inherit;
  }

  .avatar.sidenav-avatar {
    block-size: var(--dim-5);
    inline-size: var(--dim-5);
  }

  .sidenav-user-menu .popover-body {
    inset-inline: auto 0;
  }

  @media (--tablet) {
    :scope {
      align-items: stretch;
      background:
        radial-gradient(circle 216px at 50% 56px, color-mix(in oklch, var(--color-brand) 16%, transparent) 0%, transparent 65%),
        var(--color-bg);
      bottom: 0;
      flex-direction: column;
      padding-block: var(--dim-5) var(--dim-4);
      padding-inline: 0;
      position: fixed;
      inset-block: 0;
      inset-inline: 0 auto;
      width: 6rem;
      height: auto;
      z-index: var(--sidenav-layer-desktop);
    }

    .sidenav-logo {
      align-self: center;
    }

    .sidenav-tagline {
      display: block;
      font-size: 0.5625rem;
      inset: auto;
      text-align: center;
      translate: 0 -0.8125rem;
    }

    .sidenav-menu {
      align-items: stretch;
      background: transparent;
      flex-direction: column;
      gap: 0;
      inset: auto;
      margin-block: auto;
      padding: 0 0 6rem;
      position: static;
      height: auto;
    }

    .sidenav-item > a,
    .sidenav-item-more [data-role='popover-summary'] {
      border-radius: 0;
      flex-grow: 1;
    }

    .sidenav-item-more {
      display: contents;
    }

    .sidenav-item-more .popover {
      display: contents;
    }

    .sidenav-item-more [data-role='popover-summary'] {
      display: none;
    }

    .sidenav-item-more .popover-body {
      background: transparent;
      border: 0;
      border-radius: 0;
      box-shadow: none;
      display: contents;
      inset: auto;
      padding: 0;
      pointer-events: auto;
      position: static;
      text-align: center;
      transition: none;
      width: auto;
    }

    .sidenav-item-more .menu-item > a {
      align-items: center;
      border-radius: 0;
      flex-direction: column;
      gap: var(--sidenav-item-gap);
      justify-content: center;
      padding-block: var(--dim-1p5) var(--dim-1);
    }

    .sidenav-item-more .menu-label {
      color: var(--sidenav-label-color);
      font-size: var(--sidenav-label-size);
      font-weight: var(--sidenav-label-weight);
      letter-spacing: var(--sidenav-label-letter-spacing);
      line-height: var(--sidenav-label-line-height);
    }

    .sidenav-sign-in {
      --button-height: auto;
      aspect-ratio: auto;
      border-radius: 0;
      flex-direction: column;
      gap: var(--sidenav-item-gap);
      padding-block: var(--dim-1p5) var(--dim-1);
    }

    .sidenav-user-menu {
      margin-inline: auto;
    }

    .sidenav-user-menu summary {
      translate: 0 0;
    }

    .sidenav-user-menu summary::after {
      display: none;
    }

    .sidenav-user-menu .popover-body {
      inset-block-end: calc(100% + var(--dim-1));
      inset-inline-start: 0;
      inset-inline-end: auto;
      top: auto;
    }
  }

  @media (--tablet-l) {
    .sidenav-sign-in {
      background: var(--button-bg, transparent);
      border-radius: var(--radius-base);
      font-size: var(--sidenav-label-size);
      font-weight: 600;
      gap: var(--dim-1);
      height: var(--sidenav-height-desktop);
      letter-spacing: 0;
      line-height: 1;
      padding-block: 0;
      padding-inline: var(--dim-2);
    }

    .sidenav-sign-in:hover {
      filter: var(--filter-brightness-up);
    }

    .sidenav-sign-in .icon {
      display: none;
    }

    .sidenav-sign-in .sidenav-label {
      color: var(--color-text-brand);
    }
  }
}

/* #endregion */

/* -------------------------------------------------------------------------- */
/* #region: STATES                                                            */
/* -------------------------------------------------------------------------- */

:where(.page-dashboard .menu-item-home) > a {
  background-color: hsl(0 0% 100% / 0.03);
  background-image:
    radial-gradient(
      50% 24px at 50% 100%,
      rgb(255 255 255 / 0.16),
      rgb(255 255 255 / 0.14) 2%,
      rgb(255 255 255 / 0.12) 10%,
      rgb(255 255 255 / 0.09) 21%,
      rgb(255 255 255 / 0.06) 36%,
      rgb(255 255 255 / 0.03) 54%,
      rgb(255 255 255 / 0)
    );
}

.page-home .sidenav-logo {
  cursor: default;
  pointer-events: none;
}

@media (--phone) {
  .sidenav-sign-in {
    --icon-stroke: var(--button-color);
    background-color: var(--color-fill);
    border-radius: var(--radius-pill);
  }
}

/* #endregion */

